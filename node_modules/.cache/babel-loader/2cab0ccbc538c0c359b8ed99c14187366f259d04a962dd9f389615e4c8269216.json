{"ast":null,"code":"const express = require(\"express\");\nconst CryptoData = require(\"../models/CryptoData\");\nconst router = express.Router();\nrouter.get(\"/stats\", async (req, res) => {\n  const {\n    coin\n  } = req.query;\n  try {\n    const latestData = await CryptoData.findOne({\n      coin\n    }).sort({\n      timestamp: -1\n    });\n    if (!latestData) {\n      return res.status(404).json({\n        error: \"Data not found for the requested coin\"\n      });\n    }\n    res.json({\n      price: latestData.price,\n      marketCap: latestData.marketCap,\n      \"24hChange\": latestData.change24h\n    });\n  } catch (error) {\n    res.status(500).json({\n      error: \"Internal Server Error\"\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","CryptoData","router","Router","get","req","res","coin","query","latestData","findOne","sort","timestamp","status","json","error","price","marketCap","change24h","module","exports"],"sources":["C:/Users/JAYESH/Desktop/KoinX Assignment/src/routes/stats.js"],"sourcesContent":["const express = require(\"express\");\r\nconst CryptoData = require(\"../models/CryptoData\");\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/stats\", async (req, res) => {\r\n  const { coin } = req.query;\r\n  try {\r\n    const latestData = await CryptoData.findOne({ coin }).sort({ timestamp: -1 });\r\n    if (!latestData) {\r\n      return res.status(404).json({ error: \"Data not found for the requested coin\" });\r\n    }\r\n    res.json({\r\n      price: latestData.price,\r\n      marketCap: latestData.marketCap,\r\n      \"24hChange\": latestData.change24h,\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"Internal Server Error\" });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,UAAU,GAAGD,OAAO,CAAC,sBAAsB,CAAC;AAClD,MAAME,MAAM,GAAGH,OAAO,CAACI,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACvC,MAAM;IAAEC;EAAK,CAAC,GAAGF,GAAG,CAACG,KAAK;EAC1B,IAAI;IACF,MAAMC,UAAU,GAAG,MAAMR,UAAU,CAACS,OAAO,CAAC;MAAEH;IAAK,CAAC,CAAC,CAACI,IAAI,CAAC;MAAEC,SAAS,EAAE,CAAC;IAAE,CAAC,CAAC;IAC7E,IAAI,CAACH,UAAU,EAAE;MACf,OAAOH,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAwC,CAAC,CAAC;IACjF;IACAT,GAAG,CAACQ,IAAI,CAAC;MACPE,KAAK,EAAEP,UAAU,CAACO,KAAK;MACvBC,SAAS,EAAER,UAAU,CAACQ,SAAS;MAC/B,WAAW,EAAER,UAAU,CAACS;IAC1B,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOH,KAAK,EAAE;IACdT,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFI,MAAM,CAACC,OAAO,GAAGlB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}